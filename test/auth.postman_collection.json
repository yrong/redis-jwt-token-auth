{
	"info": {
		"name": "auth",
		"_postman_id": "dc89d653-d489-4df2-6b54-65c17dd6c874",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "0-prepare",
			"description": "",
			"item": [
				{
					"name": "add demo user",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"add user success\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n      \"type\":1,\n      \"attempt_ip\":\"10.50.13.69\",\n      \"userid\":{{auth_user_id}},\n      \"passwd\":\"{{auth_passwd}}\",\n      \"surname\":\"\",\n      \"name\":\"{{auth_user}}\",\n      \"alias\":\"{{auth_user}}\",\n      \"theme\":\"default\",\n      \"lang\":\"en_GB\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/register",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"register"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "login",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var token = jsonData.token||jsonData.data.token;",
									"tests[\"token found\"] = token;",
									"if(token){",
									"  postman.setEnvironmentVariable(\"token\", token);  ",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\":\"{{auth_user}}\",\n  \"password\":\"{{auth_passwd}}\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"login"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "clean",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/hidden/clean",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"hidden",
								"clean"
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "1-role&user",
			"description": "",
			"item": [
				{
					"name": "add role viewer",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"add role success\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n      \"name\":\"viewer\",\n     \"allows\":[{\"resources\":\"*\",\"permissions\":[\"READ\"]}],\n     \"additional\":{\"menus\":[\"menu1\",\"menu3\"]}\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/role?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"role"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add role contributor",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"add role success\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n      \"name\":\"contributor\",\n     \"allows\":[{\"resources\":\"own\",\"permissions\":[\"UPDATE\",\"DELETE\"]},{\"resources\":\"*\",\"permissions\":[\"CREATE\",\"READ\"]}],\n     \"additional\":{\"menus\":[\"menu1\",\"menu3\"]}\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/role?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"role"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add role superAdmin",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"add role success\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "token",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n      \"name\":\"superAdmin\",\n     \"allows\":[{\"resources\":\"*\",\"permissions\":\"*\"}],\n     \"additional\":{\"menus\":[\"menu2\",\"menu3\"]}\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/role",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"role"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "batch add roles",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"add role success\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\n      \"name\":\"viewer\",\n     \"allows\":[{\"resources\":\"*\",\"permissions\":[\"READ\"]}],\n     \"additional\":{\"menus\":[\"menu1\",\"menu3\"]}\n  },\n  {\n      \"name\":\"contributor\",\n     \"allows\":[{\"resources\":\"own\",\"permissions\":[\"UPDATE\",\"DELETE\"]},{\"resources\":\"*\",\"permissions\":[\"CREATE\",\"READ\"]}],\n     \"additional\":{\"menus\":[\"menu1\",\"menu3\"]}\n  },\n  {\n      \"name\":\"superAdmin\",\n     \"allows\":[{\"resources\":\"*\",\"permissions\":\"*\"}],\n     \"additional\":{\"menus\":[\"menu2\",\"menu3\"]}\n  }\n]"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/roles?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"roles"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "query role",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var role = jsonData.data||jsonData",
									"tests[\"at least one permission found\"] = role.allows.length >=1"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/role/contributor?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"role",
								"contributor"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "query roles",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var roles = jsonData.data||jsonData;",
									"tests[\"at least one role found\"] = roles.length >=1"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/role?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"role"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "add demo user",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"add user success\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n      \"type\":1,\n      \"attempt_ip\":\"10.50.13.69\",\n      \"userid\":{{auth_user_id}},\n      \"passwd\":\"{{auth_passwd}}\",\n      \"surname\":\"\",\n      \"name\":\"{{auth_user}}\",\n      \"alias\":\"{{auth_user}}\",\n      \"theme\":\"default\",\n      \"lang\":\"en_GB\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/register",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"register"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "bind role to user",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"bind role to user success\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n      \"roles\":[\"superAdmin\"]\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/assocRole/{{auth_user_id}}?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"assocRole",
								"{{auth_user_id}}"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "login again",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var token = jsonData.token||jsonData.data.token;",
									"tests[\"token found\"] = token;",
									"if(token){",
									"   postman.setEnvironmentVariable(\"token\", token); ",
									"}",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\":\"{{auth_user}}\",\n  \"password\":\"{{auth_passwd}}\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"login"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "delete role already used failed",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"delete role already used failed\"] = responseCode.code != 200"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/role/superAdmin?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"role",
								"superAdmin"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "query User",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var users = jsonData.data||jsonData",
									"tests[\"at least one user found\"] = users.length >=1"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/userinfo?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"userinfo"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "query User By userid",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"user found\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/userinfo/{{auth_user_id}}?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"userinfo",
								"{{auth_user_id}}"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "modify user passwd",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"passwd modified\"] = responseCode.code == 200",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\",\n  \"oldpwd\":\"{{auth_passwd}}\",\n  \"newpwd\":\"{{auth_passwd}}\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/changepwd/{{auth_user_id}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"changepwd",
								"{{auth_user_id}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "modify user info",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"user modified\"] = responseCode.code == 200",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"token\":\"{{token}}\",\n  \"avatar\":\"/upload/avatar/ca92d560-05a6-11e7-98ba-e1d08df9a25f\",\n  \"per_page\":90\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/userinfo/{{auth_user_id}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"userinfo",
								"{{auth_user_id}}"
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "2-token",
			"description": "",
			"item": [
				{
					"name": "login with user not exist",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"login failed\"] = responseCode.code != 200",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\":\"test1\",\n  \"password\":\"test\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"login"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "login with wrong passwd",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"login failed\"] = responseCode.code != 200",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\":\"nerds\",\n  \"password\":\"test1\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"login"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "check valid token",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"token valid\"] = responseCode.code == 200"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"{{token}}\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/check",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"check"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "check invalid token",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"token invalid\"] = responseCode.code != 200",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\":\"hello\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/check",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"check"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "query active tokens",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody)",
									"var tokens = jsonData.data||jsonData",
									"tests[\"token found\"] = tokens.length >0",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/active_users?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"active_users"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "3-ldap",
			"description": "",
			"item": [
				{
					"name": "login-ldap",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var token = jsonData.data&&jsonData.data.token||jsonData.token",
									"tests[\"token found\"] = token;",
									"if(token){",
									"    postman.setEnvironmentVariable(\"token\", token);",
									"}",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\":\"{{auth_ldap_user}}\",\n  \"password\":\"{{auth_ldap_passwd}}\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login-ldap",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"login-ldap"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "assoc with ldap",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"assoc with ldap success\"] = responseCode.code == 200",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"token\":\"{{token}}\",\n   \"ldapId\":\"cn=test test,ou=users,dc=test,dc=com\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/assoc/{{auth_user_id}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"assoc",
								"{{auth_user_id}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "unassoc",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"unassoc with ldap success\"] = responseCode.code == 200",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"token\":\"{{token}}\"\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/unassoc/{{auth_user_id}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"unassoc",
								"{{auth_user_id}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search ldap user",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var ldap_users = jsonData.data||jsonData",
									"tests['ldap users found']=ldap_users.length>0"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/enterprise/users?token={{token}}&page=1&per_page=5",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"enterprise",
								"users"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								},
								{
									"key": "page",
									"value": "1",
									"equals": true
								},
								{
									"key": "per_page",
									"value": "5",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search ldap user advanced",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var ldap_users = jsonData.data||jsonData",
									"tests['ldap users found']=ldap_users.length>0",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"base\":\"ou=users,dc=test,dc=com\",\n  \"options\":{\n    \"filter\": \"(objectclass=posixAccount)\"\n  }\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/ldapsearch?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"ldapsearch"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search ldap department",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var ldap_users = jsonData.data||jsonData",
									"tests['ldap department found']=ldap_users.length>0"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"base\":\"dc=test,dc=com\",\n  \"options\":{\n    \"filter\": \"(objectclass=posixGroup)\",\n    \"paged\": {\n        \"pageSize\": 5,\n        \"page\":2\n      }\n  }\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/enterprise/departments?token={{token}}&page=1&per_page=5",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"enterprise",
								"departments"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								},
								{
									"key": "page",
									"value": "1",
									"equals": true
								},
								{
									"key": "per_page",
									"value": "5",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "search ldap department advanced",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"var ldap_users = jsonData.data||jsonData",
									"tests['ldap department found']=ldap_users.length>0",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"base\":\"dc=test,dc=com\",\n  \"options\":{\n    \"filter\": \"(objectclass=posixGroup)\",\n    \"paged\": {\n        \"pageSize\": 5,\n        \"page\":2\n      }\n  }\n}"
						},
						"url": {
							"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/ldapsearch?token={{token}}",
							"protocol": "http",
							"host": [
								"{{auth_api_host}}"
							],
							"port": "{{auth_api_port}}",
							"path": [
								"auth",
								"ldapsearch"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token}}",
									"equals": true
								}
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "logout",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"token\":\"{{token}}\"\n}"
				},
				"url": {
					"raw": "http://{{auth_api_host}}:{{auth_api_port}}/auth/logout",
					"protocol": "http",
					"host": [
						"{{auth_api_host}}"
					],
					"port": "{{auth_api_port}}",
					"path": [
						"auth",
						"logout"
					]
				},
				"description": ""
			},
			"response": []
		}
	]
}